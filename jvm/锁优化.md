# 锁优化


锁只能升级，不能降级

在对象头中标识锁的状态，包括偏向锁，轻量锁，重量锁，GC标记




3.1 偏向锁
Hotspot的作者经过以往的研究发现大多数情况下锁不仅不存在多线程竞争，而且总是由同一线程多次获得。偏向锁的目的是在某个线程获得锁之后，消除这个线程锁重入（CAS）的开销，看起来让这个线程得到了偏护。




无锁-->偏向锁
一个线程对一个无锁的对象加锁，直接将markword中记录ThreadId