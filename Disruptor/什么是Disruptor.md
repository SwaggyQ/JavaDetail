# 什么是Disruptor
说起Disruptor是什么，网上已经有很多文章有过解释了，官方也有相应的论文做过解释，所以我这边也不会过多赘述，简单说来就是LMAX公司开源的一个，高性能版本的，尽量做到无锁的，消息处理队列。本系列文章尽量不会对大家说过很多次的东西做过多的说明，只会说一下我比较感兴趣的和我从中学到的一些知识点。
为什么要做Disruptor
LMAX是一个金融外汇交易商，做这个东西的主要目的就是提高交易信息处理的tps。按我们平时处理这种情境的经验，这种事情我们最常见的想法就是用java自带的阻塞队列来解决，利用FIFO策略将消息在管道里生产和消费。但是按照LMAX发布的论文内容来看，就是他们认为阻塞队列本身带有的一些拖慢处理性能的特性，促使他们投入精力开发了一套更好的能取代Queue的处理方案，那Disruptor比原有的阻塞队列的好在哪里呢？主要有以下几点
1:阻塞队列中用了很多锁的操作，而锁天生就是会拖慢速度的，锁的处理会涉及到多线程之间的上下文切换，这会耗费大量时间，而Disruptor的设计理念就是无锁，要用锁的时候也尽量最小化锁的粒度，在涉及到并发争抢的时候也尽量用CAS
		#TODO  java队列的源码里哪里用到了锁
2:关于填充缓存行的问题，Disruptor在对其中一个序号变量的存储时，填充了7个long类型的值，使其在cpu的L1缓存中有效时间尽可能的更长，而在阻塞队列里这种优化并没有被重视
3:关于内存分配时的造成的垃圾回收的问题。Disruptor中对象的分配时都是提前分配，分配的对象作为之后数据的容器，做到永生，避免频繁的垃圾回收。
